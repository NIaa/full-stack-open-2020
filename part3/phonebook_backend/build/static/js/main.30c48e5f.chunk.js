(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t(15),o=t.n(a),i=t(6),u=t(3),s=(t(21),function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{value:n,onChange:t})]})}),l=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,a=e.handleNameChange,o=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.name,t=e.number,r=e.id,a=e.handleClick;return Object(c.jsxs)("p",{children:[n," ",t," ",Object(c.jsx)("button",{onClick:function(){return a(n,r)},children:"delete"})]})},b=function(e){var n=e.persons,t=e.newFilter,r=e.handleClick,a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsx)("div",{children:a.map((function(e){return Object(c.jsx)(d,{name:e.name,number:e.number,id:e.id,handleClick:r},e.id)}))})},j=function(e){var n=e.className,t=e.message;return null===t?null:Object(c.jsx)("div",{className:n,children:t})},h=t(4),f=t.n(h),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(m,"/").concat(e))},w=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),d=Object(u.a)(o,2),h=d[0],f=d[1],m=Object(r.useState)(""),w=Object(u.a)(m,2),g=w[0],C=w[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),S=k[0],F=k[1],y=Object(r.useState)(null),P=Object(u.a)(y,2),T=P[0],D=P[1],E=Object(r.useState)("notification"),I=Object(u.a)(E,2),J=I[0],L=I[1];Object(r.useEffect)((function(){O().then((function(e){a(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{className:J,message:T}),Object(c.jsx)(s,{newFilter:S,handleFilterChange:function(e){return F(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(l,{addPerson:function(e){e.preventDefault();var n=t.map((function(e){return e.name})).indexOf(h);-1!==n&&window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one?"))?v(t[n].id,Object(i.a)(Object(i.a)({},t[n]),{},{number:g})).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){L("error"),D("Information of ".concat(t[n].name," has already been removed from server")),a(t.filter((function(e){return e.id!==t[n].id}))),setTimeout((function(){D(null)}),5e3)})):p({name:h,number:g}).then((function(e){console.log(e),a(t.concat(e)),L("notification"),D("Added ".concat(h)),f(""),C(""),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log("error"),console.log(e.response.data),L("error"),D(e.response.data.error),setTimeout((function(){D(null)}),5e3)}))},newName:h,newNumber:g,handleNameChange:function(e){return f(e.target.value)},handleNumberChange:function(e){return C(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(b,{persons:t,newFilter:S,handleClick:function(e,n){window.confirm("Delete ".concat(e,"?"))&&x(n).then((function(e){return O()})).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}})]})};o.a.render(Object(c.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.30c48e5f.chunk.js.map